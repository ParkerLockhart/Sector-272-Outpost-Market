<h1>ADMIN: MERCHANTS</h1>

<%= link_to "Create a New Merchant", new_admin_merchant_path %>

<div id="enabled-merchants">
<h3>Enabled Merchants:</h3><hr>
  <% @enabled_merchants.each do |merchant| %>
    <div id="admin-merchant-<%= merchant.id %>">
      <p>
        <%= link_to "#{merchant.name}", admin_merchant_path(merchant.id) %>
        <%= button_to "Disable", admin_merchant_path(merchant.id), method: :patch, local: true, params: {"merchant" => {status: "disabled"}} %>
      </p>
    </div>
  <% end %>
</div>
<div id="disabled-merchants">
<h3>Disabled Merchants:</h3><hr>
  <% @disabled_merchants.each do |merchant| %>
    <div id="admin-merchant-<%= merchant.id %>">
      <p>
        <%= link_to "#{merchant.name}", admin_merchant_path(merchant.id) %>
        <%= button_to "Enable", admin_merchant_path(merchant.id), method: :patch, local: true, params: {"merchant" => {status: "enabled"}} %>
      </p>
    </div>
  <% end %>
</div>


<h3>Top Five Merchants By Revenue</h3>
<div id="top-five-merchants">
<% @merchants.top_five_merchants.each do |merchant| %>
  <p><%= link_to merchant.name, admin_merchant_path(merchant.id) %>
  <%= require 'pry'; binding.pry %>
  <%= merchant.invoices.first.total_revenue %></p>
<% end %>
</div>
